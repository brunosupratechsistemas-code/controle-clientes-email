<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Controle de Treinamentos</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="icon" type="image/png" href="https://supratechsistemas.com.br/wp-content/uploads/2025/12/LOGO@2.png">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<!-- LOGIN -->
<!-- LOGIN -->
<div id="login-screen" class="login-screen">

  <!-- background overlay -->
  <div class="login-overlay">
  </div>

  <div class="login-box">

    <!-- LOGO -->
    <img src="https://supratechsistemas.com.br/wp-content/uploads/2025/12/Sem-titulo.png" alt="SupraTech" class="login-logo">

    <h2>Login</h2>

    <input type="email" id="email" placeholder="E-mail">

    <!-- SENHA COM ÃCONE -->
    <div class="password-wrapper">
      <input type="password" id="password" placeholder="Senha">
      <span class="toggle-password" onclick="togglePassword()">ğŸ‘</span>
    </div>

    <button id="btn-login">Entrar</button>

    <p id="login-error"></p>

    <div class="login-footer">
      Supratech Â© | Todos os direitos reservados.
    </div>
  </div>
  <!-- LOADING -->
<div id="login-loading" class="login-loading" style="display:none">
  <div class="spinner"></div>
  <p>Entrando no sistema...</p>
</div>

</div>

<div id="notif-wrapper">
  <button id="notif-bell">
    ğŸ”” <span id="notif-count">0</span>
  </button>

  <div id="notif-dropdown"></div>
</div>
</div>
<!-- APP -->
<div id="app" style="display:none">
<button id="btnNotifSound" onclick="toggleNotifSound()">
  ğŸ”” Som: ON
</button>

  <button class="logout" onclick="logout()">Sair</button>
  <h1>Controle de Treinamentos</h1>
<!-- =========================
     TABS SUPORTE (SÃ“ SUPORTE)
========================= -->
<div id="suporte-tabs" class="admin-tabs" style="display:none; justify-content:center; gap:10px; margin-bottom:14px;">
  <button id="tab-sup-kanban" class="tab-btn active" onclick="showSuporteTab('kanban')">ğŸ“Œ Clientes</button>
  <button id="tab-sup-atividades" class="tab-btn" onclick="showSuporteTab('atividades')">ğŸ“ Atividades</button>
</div>
<!-- ========================= 
     ABA SUPORTE - ATIVIDADES -->
<div id="suporte-tab-atividades" style="display:none;">
  <div id="atividades-wrapper">
    <!-- MESES -->
<div class="atividades-actions">
  <button class="btn-success" onclick="salvarAlteracoesAtividades()">
    ğŸ’¾ Salvar alteraÃ§Ãµes
  </button>

  <button class="btn-resumo" onclick="abrirResumoAtividades()">
    ğŸ“ŠResumo de Atividades
  </button>
</div>


     <h2 id="mes-titulo" class="mes-titulo"></h2>
<div style="text-align:center; margin-bottom:10px;">
  <button class="btn-criar-mes" onclick="criarNovoMes()">â• Criar novo mÃªs</button>
</div>

    <div id="mes-tabs" class="mes-tabs"></div>
<div class="linha-atividade header">
  <div>Data</div>
  <div>Cliente</div>
  <div>Atividade</div>
  <div>ObservaÃ§Ãµes</div>
</div>

    <!-- TABELA -->
    <div id="atividades-tabela"></div>

    <!-- PAGINAÃ‡ÃƒO -->
    <div class="paginacao">
      <button onclick="paginaAnterior()">â¬… Voltar</button>
      <span id="page-indicator">1 / 1</span>
      <button onclick="paginaProxima()">PrÃ³ximo â¡</button>
    </div>
    <div style="text-align:center; margin-top:14px;">
  <button onclick="novaPagina()" class="btn-nova-pagina">
    â• Nova pÃ¡gina
  </button>
</div>

  </div>
  
<div id="atividades-resumo" style="display:none;">
  <h2 style="text-align:center;margin-top:10px;">ğŸ“Š Resumo de Atividades</h2>

  <div class="resumo-table-wrapper">
    <table class="resumo-table">
      <thead>
        <tr>
          <th>MÃªs</th>
          <th>ApresentaÃ§Ã£o</th>
          <th>Treinamento</th>
          <th>MigraÃ§Ã£o</th>
          <th>ParametrizaÃ§Ã£o</th>
        </tr>
      </thead>

      <tbody id="resumo-body"></tbody>
      <tfoot id="resumo-footer"></tfoot>
    </table>
  </div>

  <div style="text-align:center;margin-top:12px;">
    <button class="btn-voltar" onclick="fecharResumoAtividades()">â¬… Voltar</button>
  </div>
</div>

</div>



  <input
  id="searchClient"
  placeholder="ğŸ” Buscar cliente..."
  class="search-input"
/>
<!-- FILTRO POR SUPORTE (ADMIN) -->
<div id="filter-suporte-box" style="display:none; text-align:center; margin-bottom:16px;">
  <select id="filterSuporte" class="search-input" style="max-width:320px;">
    <option value="">ğŸ” Todos os suportes</option>
  </select>
</div>

  <!-- BOARD -->
  <div class="board">
    <div class="column espera">
      <h2>ESPERA</h2>
      <div class="card-container" id="espera"></div>
    </div>

    <div class="column agendado">
      <h2>AGENDADO</h2>
      <div class="card-container" id="agendado"></div>
    </div>

    <div class="column finalizado">
      <h2>FINALIZADO</h2>
      <div class="card-container" id="finalizado"></div>
    </div>
  </div>
<div id="modal-confirm-email" class="modal">
  <div class="modal-content">
    <h3>Enviar e-mail ao suporte?</h3>
    <p>
      Deseja notificar o novo suporte sobre este cliente?
    </p>

    <div class="modal-actions">
      <button onclick="confirmSendEmail()">âœ… Enviar</button>
      <button class="danger" onclick="cancelSendEmail()">âŒ Cancelar</button>
    </div>
  </div>
</div>
  <!-- ADD CLIENT -->
<!-- BOTÃƒO ADD CLIENTE -->
<div class="add-client">
  <button onclick="openAddClientModal()">â• Novo Cliente</button>
</div>

<!-- MODAL ADD CLIENTE -->
<div id="modal-add-client" class="modal">
  <div class="modal-content">

    <span class="close" onclick="closeAddClientModal()">Ã—</span>
    <h2>Novo Cliente</h2>

    <!-- Nome -->
    <input
      id="modalClientName"
      placeholder="Nome do cliente"
    />
<input
  id="modalClientTelefone"
  placeholder="Telefone do cliente"
/>



    <!-- Buscar contabilidade -->
    <input
      id="contabilidadeSearch"
      placeholder="Digite o nome da contabilidade"
    />

    <button onclick="openCreateContabilidade()">â• Nova</button>

    <!-- Select contabilidade -->
    <select
      id="modalContabilidade"
      onchange="onContabilidadeChange()"
    ></select>
  <!-- ğŸ”¥ SELECT SUPORTE (ADMIN) -->
    <select id="modalSuporte">
      <option value="">Selecione o suporte</option>
    </select>

    <!-- Telefone da contabilidade -->
    <input
      id="modalTelefone"
      placeholder="Telefone da contabilidade"
      disabled
    />

  
    <button onclick="confirmAddClient()">Salvar</button>

  </div>
</div>


<!-- =========================
     MODAL CONTABILIDADE (PADRÃƒO CLIENTE)
========================= -->
<div id="modal-contabilidade" class="modal" style="display:none">
  <div class="modal-content modal-contabilidade">

    <span class="close" onclick="closeCreateContabilidade()">Ã—</span>

    <h2>Nova Contabilidade</h2>

    <input
      id="contNome"
      placeholder="Nome da contabilidade"
    />

    <input
      id="contTelefone"
      placeholder="Telefone"
    />

    <button onclick="saveContabilidade()">Salvar</button>

  </div>
</div>



  <!-- ADMIN LOCK -->
  <div id="admin-lock" class="admin-box" style="display:none">
    <button class="admin-lock-btn" onclick="unlockAdmin()">ğŸ”’ Ãrea administrativa</button>
    <p id="admin-lock-msg"></p>
  </div>

  <!-- ADMIN AREA -->
  <div id="admin-area" class="admin-box" style="display:none">

    <div class="admin-header">
      <div class="admin-tabs">
        <button id="tab-users" class="tab-btn active" onclick="showAdminTab('users')">ğŸ‘¤ UsuÃ¡rios</button>
        <button id="tab-history" class="tab-btn" onclick="showAdminTab('history')">ğŸ“œ HistÃ³rico</button>
        <button id="tab-dashboard" class="tab-btn" onclick="showAdminTab('dashboard')">ğŸ“Š Dashboard</button>
        <button id="tab-contabilidades" onclick="showAdminTab('contabilidades')">
  Contabilidades
</button>
<button id="tab-exclusoes" class="tab-btn" onclick="showAdminTab('exclusoes')">
  ğŸ—‘ SolicitaÃ§Ãµes
</button>
<button id="tab-atividades-admin" class="tab-btn" onclick="showAdminTab('atividades-admin')">
  ğŸ“Š Atividades
</button>
<div id="admin-tab-atividades-admin" class="admin-tab" style="display:none">

  <h2 style="text-align:center;margin-bottom:10px;">
    ğŸ“Š Resumo de Atividades (Admin)
  </h2>

  <!-- FILTRO SUPORTE -->
  <div style="text-align:center;margin-bottom:12px;">
    <select id="adminResumoSuporte" class="search-input" style="max-width:280px;">
      <option value="">ğŸ‘¥ Todos os suportes</option>
    </select>
  </div>

  <!-- TABELA -->
  <div class="resumo-table-wrapper">
    <table class="resumo-table">
      <thead>
        <tr>
          <th>MÃªs</th>
          <th>ApresentaÃ§Ã£o</th>
          <th>Treinamento</th>
          <th>MigraÃ§Ã£o</th>
          <th>ParametrizaÃ§Ã£o</th>
        </tr>
      </thead>

      <tbody id="admin-resumo-body"></tbody>
      <tfoot id="admin-resumo-footer"></tfoot>
    </table>
  </div>
  <!-- GRÃFICO -->
  <div class="admin-atividades-chart">
    <canvas id="adminResumoChart"></canvas>
  </div>
</div>


<div id="admin-tab-exclusoes" class="admin-tab" style="display:none">
  <h3>SolicitaÃ§Ãµes de ExclusÃ£o</h3>
  <table class="admin-table">
    <thead>
      <tr>
        <th>Cliente</th>
        <th>Solicitado por</th>
        <th>Motivo</th>
        <th>AÃ§Ãµes</th>
      </tr>
    </thead>
    <tbody id="exclusoes-body"></tbody>
  </table>
</div>

<div id="admin-tab-contabilidades" class="admin-tab" style="display:none">

  <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
    <h2>Contabilidades cadastradas</h2>
    <button onclick="openCreateContabilidade()">â• Nova Contabilidade</button>
  </div>
<input
  id="searchContAdmin"
  placeholder="ğŸ” Buscar contabilidade..."
  style="width:260px; padding:8px; border-radius:8px; border:none; margin-bottom:10px;"
/>

  <div class="contabilidades-table-wrap">
    <table class="contabilidades-table">
      <thead>
        <tr>
          <th>Nome</th>
          <th>Telefone</th>
          <th class="actions">AÃ§Ãµes</th>
        </tr>
      </thead>
      <tbody id="contabilidadesBody">
        <tr>
          <td colspan="3" style="text-align:center; opacity:.7">
            Carregando contabilidades...
          </td>
        </tr>
      </tbody>
    </table>
  </div>
<div class="pagination">
  <button id="btnPrevCont" onclick="prevContPage()">â¬… Anterior</button>
  <span id="contPageInfo">PÃ¡gina 1</span>
  <button id="btnNextCont" onclick="nextContPage()">PrÃ³xima â¡</button>
</div>

</div>


      </div>
<button class="btn-admin-close" onclick="lockAdmin()">Fechar</button>
    </div>

    <!-- USERS -->
    <div id="admin-tab-users" class="admin-tab">

  <h2>Criar novo usuÃ¡rio</h2>

  <!-- LINHA DOS CAMPOS -->
  <div class="create-user-row">

    <input type="text" id="newUserName" placeholder="Nome do usuÃ¡rio">
    <input id="newUserEmail" placeholder="E-mail">
    <input id="newUserPassword" type="password" placeholder="Senha">

    <!-- SELETOR DE PERFIL (VAI PARA DIREITA) -->
    <div class="role-select">
      <label class="role-option">
        <input type="radio" name="userRole" value="admin">
        <span>Administrador</span>
      </label>

      <label class="role-option">
        <input type="radio" name="userRole" value="user" checked>
        <span>UsuÃ¡rio</span>
      </label>
    </div>

  </div>

  <button onclick="createUser()">Criar</button>
  <p id="createUserMsg"></p>

  <hr style="margin:20px 0; opacity:.3">

  <h3>UsuÃ¡rios cadastrados</h3>

  <div class="users-table-wrap">
    <table class="users-table">
      <thead>
        <tr>
          <th>Nome</th>
          <th>Email</th>
          <th>Tipo</th>
          <th>AÃ§Ãµes</th>
        </tr>
      </thead>

      <tbody id="usersBody">
        <tr>
          <td colspan="4" style="text-align:center; opacity:.7">
            Carregando usuÃ¡rios...
          </td>
        </tr>
      </tbody>
    </table>
  </div>

</div>


    <!-- HISTÃ“RICO -->
    <div id="admin-tab-history" class="admin-tab" style="display:none">
      <table class="history-table">
        <thead>
          <tr>
            <th>Data</th>
            <th>AÃ§Ã£o</th>
            <th>Cliente</th>
            <th class="col-user">UsuÃ¡rio</th>
          </tr>
        </thead>
        <tbody id="historyBody"></tbody>
      </table>
    </div>

    <!-- DASHBOARD -->
    <div id="admin-tab-dashboard" class="admin-tab" style="display:none">

      <div class="dashboard-cards">
        <div class="dash-card"><h3>Total</h3><p id="dashTotal">0</p></div>
        <div class="dash-card espera"><h3>Espera</h3><p id="dashEspera">0</p></div>
        <div class="dash-card agendado"><h3>Agendado</h3><p id="dashAgendado">0</p></div>
        <div class="dash-card finalizado"><h3>Finalizado</h3><p id="dashFinalizado">0</p></div>
      </div>
<div
  id="dash-suporte-filter-box"
  style="display:none; margin-bottom:14px;"
>
  <select
    id="dashSuporteFilter"
    class="search-input"
    style="max-width:280px;"
  >
    <option value="">ğŸ“Š Todos os suportes</option>
  </select>
</div>

      <div class="dashboard-charts">
        <canvas id="chartStatus"></canvas>
        <canvas id="chartCriacao"></canvas>
      </div>

    </div>

  </div>
  <!-- MODAL OBSERVAÃ‡Ã•ES -->
<div id="modal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeModal()">Ã—</span>
    <h2 id="modalTitle"></h2>
<div id="modalClientPhone" class="modal-client-phone"></div>

    <div id="obs-meta-card" class="obs-meta-card" style="display:none">
  <div><strong>ğŸ¢ Contabilidade:</strong> <span id="obs-cont-nome"></span></div>
  <div><strong>ğŸ“ Telefone:</strong> <span id="obs-cont-telefone"></span></div>
  <div><strong>ğŸ‘¤ Suporte:</strong> <span id="obs-suporte-nome"></span></div>
</div>

    <textarea id="modalTextarea"></textarea>
    <button onclick="saveObservation()">Salvar</button>
  </div>
</div>

<!-- =========================
     MODAL EDITAR CLIENTE
========================= -->
<div id="modal-edit-client" class="modal">
  <div class="modal-content">
<span class="close" onclick="closeEditClientModal()">Ã—</span>
    <h2>Editar Cliente</h2>

    <input id="editClientName" placeholder="Nome do cliente" />
    <input id="editClientTelefone" placeholder="Telefone" />
<label class="edit-client-label">ğŸ›  Suporte responsÃ¡vel</label>
<select id="editClientSuporte"></select>

   
    <button onclick="saveEditClient()">Salvar</button>
  </div>
</div>


<!-- LOADING GLOBAL -->
<div id="global-loading" class="global-loading" style="display:none">
  <div class="loading-box">
    <img src="logo-supratech.png" class="loading-logo">
    <div class="spinner"></div>
    <p id="loading-text">Processando...</p>
  </div>
</div>
<!-- =========================
     MODAL CRIAR NOVO MÃŠS
========================= -->
<div id="modal-criar-mes" class="modal">
  <div class="modal-content modal-criar-mes">

    <span class="close" onclick="fecharModalCriarMes()">Ã—</span>

    <h2>ğŸ“… Criar novo mÃªs</h2>

    <div class="mes-form">
      <label>MÃªs</label>
      <select id="novoMesSelect">
        <option value="">Selecione o mÃªs</option>
        <option value="01">Janeiro</option>
        <option value="02">Fevereiro</option>
        <option value="03">MarÃ§o</option>
        <option value="04">Abril</option>
        <option value="05">Maio</option>
        <option value="06">Junho</option>
        <option value="07">Julho</option>
        <option value="08">Agosto</option>
        <option value="09">Setembro</option>
        <option value="10">Outubro</option>
        <option value="11">Novembro</option>
        <option value="12">Dezembro</option>
      </select>

      <label>Ano</label>
      <select id="novoAnoSelect"></select>
    </div>

    <div class="modal-actions">
      <button class="btn-secondary" onclick="fecharModalCriarMes()">Cancelar</button>
      <button class="btn-primary" onclick="confirmarCriarMes()">Criar mÃªs</button>
    </div>

  </div>
</div>

<div id="toast-container"></div>
<audio id="notif-sound" src="/notification-sound-effect-372475.mp3" preload="auto"></audio>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
  emailjs.init("-a3VRbvh00ISwTPNX");
</script>

<script type="module" src="./main.js"></script>

</body>
</html>
